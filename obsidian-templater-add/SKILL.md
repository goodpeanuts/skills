---
name: obsidian-templater-add
description: Create Obsidian notes by executing compiled templater writer scripts and enforcing filename and output-folder contracts.
---

# Obsidian Templater Add

Create Obsidian notes via compiled Bash scripts generated by `obsidian-templater-compiler`.

## Purpose

This skill executes the generated writer scripts and enforces a strict runtime contract:
- template-driven content generation
- current-time timestamp filling
- deterministic default output directory resolution
- filename collision handling (`Increment the file name` style)

The script set is dynamic. Use `manifest.json` to discover available note types.

## Prerequisite

Run compiler first:

```bash
bash ../obsidian-templater-compiler/scripts/compile_obsidian_templater_generators.sh \
  --vault-root /mnt/d/obsidian/obsidianx \
  --target-skill-dir .
```

## Discover Available Note Types

```bash
cat scripts/manifest.json
```

For each manifest entry `create-<type>.sh`, use:

```bash
bash scripts/create-<type>.sh --vault-root <vault-path> [options]
```

If `manifest.json` marks `file_name_mode: "daily_format"`, passed `--file-name` will be ignored with warning.
If `manifest.json` marks `file_name_mode: "manual"`, `--file-name` is required.

## Runtime Parameters

Common parameters supported by generated scripts:
- `--file-name` (conditionally required): required only when `file_name_mode` is `manual`
- `--vault-root` (required): vault root path
- `--out-dir` (optional): only effective when `default_folder` is `/`
- `--dry-run` (optional): preview path/content without writing
- `--tags` (optional): used when template supports tags placeholder
- `--info` (optional): used when template supports info placeholder

## Behavior Guarantees

- Uses template file from `manifest.json` at runtime
- Applies filename policy from manifest:
  - `manual`: use `--file-name`
  - `daily_format`: generate filename from configured date format; passed `--file-name` is ignored with warning
- Resolves relative output folders against `--vault-root`
- Treats `--out-dir /` as vault root
- For scripts with `default_folder != "/"`, passed `--out-dir` is ignored with warning and default folder is enforced
- Preserves template body sections and frontmatter structure
- Uses current local timezone now for date/time/id placeholders
- Avoids overwrite by incrementing filename suffix

## Fixed Output Folder Rule

When `manifest.json` shows a non-root `default_folder`, the generated script enforces that folder.

- If caller passes `--out-dir`, script only prints a warning and keeps `default_folder`.
- If caller passes `--file-name` to `daily_format` scripts, script only prints a warning and uses the configured date format.
- To place that note elsewhere, first create it in default folder, then move it manually (for example: `mv <src> <dst>`).

## Dry Run

For `manual` filename mode:

```bash
bash scripts/create-<type>.sh --file-name "Test" --vault-root /mnt/d/obsidian/obsidianx --dry-run
```

## Troubleshooting

- `template not found`: re-run compiler after template/config changes
- `--vault-root is required`: pass explicit vault path
- unexpected output folder: check `manifest.json` `default_folder` and `--out-dir`
- missing scripts or incorrect generated behavior: run `obsidian-templater-compiler` to regenerate `scripts/`, then retry writer script execution

## Files

- `scripts/common.sh`
- `scripts/create-*.sh`
- `scripts/manifest.json`
